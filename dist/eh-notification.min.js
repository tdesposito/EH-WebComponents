// This file is part of EH-WebComponents, Copyright (C) Todd D. Esposito 2021.
// Distributed under the MIT License (see https://opensource.org/licenses/MIT).
window.customElements.define("eh-notification",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.onClick=this.onClick.bind(this),this.closePanel=this.closePanel.bind(this),this.shadowRoot.innerHTML='<style>#wrapper{font-size:var(--notification-font-size,1rem);height:calc(100vh - var(--notification-margin,20px) * 2);left:var(--notification-margin,20px);margin:0;overflow:hidden;padding:0;pointer-events:none;position:absolute;text-align:left;top:var(--notification-margin,20px);width:calc(100vw - var(--notification-margin,20px) * 2)}.panel{border:var(--panel-border,none);border-radius:var(--panel-border-radius,0);color:var(--panel-color,#fff);height:var(--panel-height,4em);margin-bottom:var(--panel-margin,.5em);margin-left:calc(100vw - var(--notification-margin,20px) * 2 - var(--panel-width,20em));opacity:var(--panel-opacity,.75);overflow:hidden;padding:0;pointer-events:auto;transition-property:opacity,transform;transition-duration:var(--animation-time,1.5s);width:var(--panel-width,20em)}.panel.closed{height:0;transition:height var(--animation-time,.75s)}.panel:hover{opacity:1;transition:opacity .25s ease}.panel.success{background-color:rgb(var(--success-background-color,0 100 0))}.panel.info{background-color:rgb(var(--info-background-color,0 0 200))}.panel.warning{background-color:rgb(var(--warning-background-color,200 200 0))}.panel.error{background-color:rgb(var(--error-background-color,200 0 0))}.panel.slide{margin-left:calc(100vw - var(--notification-margin,20px) * 2)}.panel.fade{opacity:0}.panel.left{margin-left:0}.panel.left.slide{margin-left:calc(var(--panel-width,20em) * -1)}.panel.center{margin-left:calc(50vw - var(--panel-width,20em)/ 2)}.inner{padding:10px}.inner button{cursor:pointer;float:right;color:var(--panel-color,#fff);background-color:transparent;border:none}.hidden{display:none}.message{margin:0}</style><div id="wrapper"></div><template id="template"><div class="panel"><div class="inner"><button class="hidden">â“§</button><p class="message"></p></div></div></template>',this.panelList={},this.wrapper=this.shadowRoot.getElementById("wrapper"),this.template=this.shadowRoot.getElementById("template");let e=["canclose"];e=this.hasAttribute("center")?e.concat(["center","fade"]):this.hasAttribute("fade")?e.concat(["fade","center","left"]):this.hasAttribute("slide")?e.concat(["slide","left"]):e.concat(["left"]),this.panelClasses=[],e.forEach((e=>{this.hasAttribute(e)&&this.panelClasses.push(e)}))}get canclose(){return this.hasAttribute("canclose")||this.timeout<1}get timeout(){return parseInt(this.getAttribute("autoclose")||0)}onClick(e){if(e.stopPropagation(),this.canclose){let t=e.target;"DIV"!==t.nodeName&&(t=t.parentNode.parentNode),this.closePanel(t.dataset.id)}}connectedCallback(){this.shadowRoot.addEventListener("click",this.onClick)}disconnectedCallback(){this.shadowRoot.removeEventListener("click",this.onClick)}add(e,t="info"){let a=window.performance.now(),n=this.template.content.cloneNode(!0),i=n.querySelector(".panel");if(i.classList.add(t),i.dataset.id=a,i.classList.add(...this.panelClasses),n.querySelector(".message").innerHTML=e,this.canclose&&n.querySelector("button").classList.remove("hidden"),this.wrapper.appendChild(n),this.panelList[a]={panel:i},this.timeout&&(this.panelList[a].timer=setTimeout((()=>this.closePanel(a)),this.timeout)),i.classList.contains("fade"))setTimeout((()=>{i.style.opacity=getComputedStyle(this.wrapper).getPropertyValue("--panel-opacity")||.75}),100);else if(i.classList.contains("slide")){let e=parseInt(getComputedStyle(i).width);i.classList.contains("left")?i.style.transform=`translateX(${e}px)`:i.style.transform=`translateX(-${e}px)`}return a}clearPanels(){Object.keys(this.panelList).forEach((e=>{this.closePanel(e)}))}closePanel(e){let t=this.panelList[e];t&&(t.timer&&clearTimeout(t.timer),t.panel.classList.add("closed"),t.panel.addEventListener("transitionend",(()=>{t.panel.remove()})))}onClose(){}});